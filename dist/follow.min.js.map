{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"AAAA,KAAM,CAAA,MAAO,CAKF,QAAP,CAAkC,GAAI,CAAA,cAAtC,CAMO,QAAP,IAMO,KAAP,CAA+B,GAAI,CAAA,cAAJ,CAAmB,CAAnB,CAAsB,CAAtB,CAA/B,CAMO,MAAP,CAAgC,GAAI,CAAA,cAAJ,CAAmB,CAAnB,CAAsB,CAAtB,CAAhC,CAMA,WAAW,CAAE,CAAe,OAAjB,CAA+B,CACtC,KAAK,WAAL,CAAiB,CAAjB,CADsC,CAEtC,KAAK,QAAL,CAAc,QAAd,EAA0B,KAAK,QAAL,EAC7B,CAMM,QAAP,EAAmB,CACf,GAAI,CAAA,CAAgC,CAAG,QAAQ,CAAC,gBAAT,CAA2B,IAAG,KAAK,QAAL,UAA2B,GAAzD,CAAvC,CACA,CAAO,CAAC,OAAR,CAAgB,CAAM,EAAI,KAAK,QAAL,CAAc,IAAd,CAAmB,GAAI,CAAA,aAAJ,CAAkB,CAAlB,CAA0B,KAAK,QAA/B,CAAnB,CAA1B,CAFe,CAIf,GAAI,CAAA,CAAO,CAAG,IAAd,CAEA,QAAQ,CAAC,gBAAT,CAA0B,WAA1B,CAAwC,CAAD,EAAW,CAC9C,MAAM,CAAC,mBAAP,CAA2B,GAAI,CAAA,cAAJ,CAAmB,CAAK,CAAC,OAAzB,CAAkC,CAAK,CAAC,OAAxC,CAA3B,CAA6E,CAA7E,CAD8C,CAE9C,MAAM,CAAC,OAAP,CAAe,CAAf,CACH,CAHD,CANe,CAWf,QAAQ,CAAC,gBAAT,CAA0B,QAA1B,CAAoC,IAAM,CACtC,MAAM,CAAC,oBAAP,CAA4B,GAAI,CAAA,cAAJ,CAAmB,MAAM,CAAC,OAA1B,CAAmC,MAAM,CAAC,OAA1C,CAA5B,CAAgF,CAAhF,CADsC,CAEtC,MAAM,CAAC,OAAP,CAAe,CAAf,CACH,CAHD,CAIH,CAMM,OAAP,EAAkB,CACd,KAAK,QAAL,GACH,CAKM,OAAP,EAAkB,CACd,KAAK,OAAL,EADc,CAEd,KAAK,QAAL,EACH,CAMD,MAAe,CAAA,OAAf,CAAwB,CAAxB,CAAsC,CAClC,IAAK,GAAI,CAAA,CAAT,GAAoB,CAAA,CAAO,CAAC,QAA5B,CAAsC,CAClC,GAAI,CAAA,CAA0B,CAAG,GAAI,CAAA,cAAJ,CAC7B,UAAU,CAAC,CAAC,CAAC,CAAO,CAAC,KAAR,CAAc,CAAd,CAAkB,CAAO,CAAC,MAAR,CAAe,CAAjC,CAAqC,CAAO,CAAC,QAAR,CAAiB,CAAvD,EAA4D,CAAO,CAAC,MAArE,EAA6E,QAA7E,EAAD,CADmB,CAE7B,UAAU,CAAC,CAAC,CAAC,CAAO,CAAC,KAAR,CAAc,CAAd,CAAkB,CAAO,CAAC,MAAR,CAAe,CAAjC,CAAqC,CAAO,CAAC,QAAR,CAAiB,CAAvD,EAA4D,CAAO,CAAC,MAArE,EAA6E,QAA7E,EAAD,CAFmB,CAAjC,CAMA,CAAO,CAAC,YAAR,CAAqB,CAArB,CACH,CACJ,CAOD,MAAe,CAAA,mBAAf,CAAoC,CAApC,CAA8D,CAA9D,CAA4E,CACxE,CAAO,CAAC,KAAR,CAAc,CAAd,CAAkB,CAAQ,CAAC,CAD6C,CAExE,CAAO,CAAC,KAAR,CAAc,CAAd,CAAkB,CAAQ,CAAC,CAC9B,CAOD,MAAe,CAAA,oBAAf,CAAqC,CAArC,CAA+D,CAA/D,CAA6E,CACzE,CAAO,CAAC,MAAR,CAAe,CAAf,CAAmB,CAAQ,CAAC,CAD6C,CAEzE,CAAO,CAAC,MAAR,CAAe,CAAf,CAAmB,CAAQ,CAAC,CAC/B,CAMD,WAAW,CAAE,CAAF,CAAmB,CAC1B,GAAI,CAAO,EAAI,CAAO,SAAtB,CACI,IAAK,KAAM,CAAA,CAAX,GAAuB,MAAK,QAA5B,CACQ,KAAK,QAAL,CAAc,cAAd,CAA6B,CAA7B,GAA0C,SAAA,CAAO,SAAP,CAAoB,CAApB,CADlD,GAEQ,KAAK,QAAL,CAAc,CAAd,EAA0B,CAAO,SAAP,CAAoB,CAApB,CAFlC,CAMP,CAvHQ,CA0Hb,KAAM,CAAA,aAAc,CA8BhB,WAAW,CAAE,CAAF,CAAuB,CAAvB,CAAiD,CACxD,KAAK,MAAL,CAAc,CAD0C,CAExD,KAAK,MAAL,CAAc,QAAQ,CAAC,CAAM,CAAC,YAAP,CAAoB,CAAQ,UAA5B,CAAD,CAAR,EAAwD,CAAQ,OAFtB,CAGxD,KAAK,QAAL,CAAgB,KAAK,WAAL,EACnB,CAMM,WAAP,EAAsB,IAEd,CAAA,CAA2B,CAAG,QAAQ,CAAC,IAAT,CAAc,qBAAd,EAFhB,CAGd,CAAoB,CAAG,KAAK,MAAL,CAAY,qBAAZ,EAHT,CAId,CAAS,CAAG,CAAQ,CAAC,IAAT,CAAgB,CAAe,CAAC,IAJ9B,CAKd,CAAS,CAAG,CAAQ,CAAC,GAAT,CAAe,CAAe,CAAC,GAL7B,CAQd,CAAc,CAAG,KAAK,MAAL,CAAY,YARf,CASd,CAAa,CAAG,KAAK,MAAL,CAAY,WATd,CAclB,MAHA,CAAA,CAAC,EAAK,CAAK,CAAG,CAGd,CAFA,CAAC,EAAK,CAAM,CAAG,CAEf,CAAO,GAAI,CAAA,cAAJ,CAAmB,CAAnB,CAAsB,CAAtB,CACV,CAKM,cAAP,EAAyB,CACrB,KAAK,QAAL,CAAgB,KAAK,WAAL,EACnB,CAMM,YAAP,CAAqB,CAArB,CAA+C,CAExB,CAAf,GAAA,CAAQ,CAAC,CAF8B,GAErB,CAAQ,CAAC,CAAT,CAAa,EAFQ,EAGxB,CAAf,GAAA,CAAQ,CAAC,CAH8B,GAGrB,CAAQ,CAAC,CAAT,CAAa,EAHQ,KAKvC,CAAA,CAAiB,CAAG,KAAK,MAAL,CAAY,KAAZ,CAAkB,SALC,CAMvC,CAAiB,CAAI,aAAY,CAAQ,CAAC,CAAE,OAAM,CAAQ,CAAC,CAAE,KANtB,CAQvC,KAAK,SARkC,CASvC,CAAS,CAAG,CAAS,CAAC,OAAV,CAAkB,KAAK,SAAvB,CAAkC,CAAlC,CAT2B,CAWvC,CAAS,EAAK,IAAG,CAAU,EAAd,CAAgB,IAAhB,EAX0B,CAc3C,KAAK,SAAL,CAAiB,CAd0B,CAe3C,KAAK,MAAL,CAAY,KAAZ,CAAkB,SAAlB,CAA8B,CACjC,CApFe,CAuFpB,KAAM,CAAA,cAAe,CAyBjB,WAAW,CAAE,CAAF,CAAa,CAAb,CAAwB,CAAS,CAAG,CAApC,CAAuC,CAC9C,KAAK,CAAL,CAAS,CADqC,CAE9C,KAAK,CAAL,CAAS,CAFqC,CAG9C,KAAK,CAAL,CAAS,CACZ,CA7BgB,CAoCrB,KAAM,CAAA,cAAe,CAKV,MAAP,CAAwB,EAAxB,CAMO,SAAP,CAA2B,aAA3B,CAMO,QAAP,GAjBiB,CAwBrB,CAAC,IAAM,CACH,GAAI,QAAQ,CAAC,aAAb,CAA4B,CACxB,GAAI,CAAA,CAAa,CAAG,QAAQ,CAAC,aAAT,CAAuB,YAAvB,CAAoC,kBAApC,CAApB,CADwB,CAEV,EAAV,GAAA,CAAK,EAAqB,MAAV,GAAA,CAFI,IAGpB,MAAM,OAAN,CAAmB,GAAI,CAAA,MAHH,CAK3B,CACJ,CAPD,G","file":"follow.min.js","sourcesContent":["class Follow {\r\n    /**\r\n     * The options for the follow script\r\n     * @type {FollowDefaults}\r\n     */\r\n    public defaults: FollowDefaults = new FollowDefaults()\r\n\r\n    /**\r\n     * Array where all the elements are stored in\r\n     * @type Array<FollowElement>\r\n     */\r\n    public elements: Array<FollowElement> = new Array<FollowElement>()\r\n\r\n    /**\r\n     * Position of the Mouse to use to calculate\r\n     * @type {FollowPosition}\r\n     */\r\n    public mouse: FollowPosition = new FollowPosition(0, 0)\r\n\r\n    /**\r\n     * Current scroll position to use to calculate\r\n     * @type {FollowPosition}\r\n     */\r\n    public scroll: FollowPosition = new FollowPosition(0, 0)\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {object} options\r\n     */\r\n    constructor (options: object = undefined) {\r\n        this.setDefaults(options)\r\n        this.defaults.initiate && this.initiate()\r\n    }\r\n\r\n    /**\r\n     * Initiate the script\r\n     * Get all elements with the given attribute and activate the animation\r\n     */\r\n    public initiate () {\r\n        let targets: NodeListOf<HTMLElement> = document.querySelectorAll(`[${this.defaults['attribute']}]`)\r\n        targets.forEach(target => this.elements.push(new FollowElement(target, this.defaults)))\r\n\r\n        let context = this\r\n\r\n        document.addEventListener('mousemove', (event) => {\r\n            Follow.updateMousePosition(new FollowPosition(event.clientX, event.clientY), context)\r\n            Follow.animate(context)\r\n        })\r\n\r\n        document.addEventListener('scroll', () => {\r\n            Follow.updateScrollPosition(new FollowPosition(window.scrollX, window.scrollY), context)\r\n            Follow.animate(context)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Destroy the script\r\n     * Remove all elements and set them to their normal position\r\n     */\r\n    public destroy () {\r\n        this.elements = new Array<FollowElement>()\r\n    }\r\n\r\n    /**\r\n     * Destroy the script and initiate it again with the same options\r\n     */\r\n    public refresh () {\r\n        this.destroy()\r\n        this.initiate()\r\n    }\r\n\r\n    /**\r\n     * Animate the element\r\n     * @param context\r\n     */\r\n    private static animate (context: any) {\r\n        for (let element of context.elements) {\r\n            let additional: FollowPosition = new FollowPosition(\r\n                parseFloat(((context.mouse.x + context.scroll.x - element.position.x) / element.factor).toString()),\r\n                parseFloat(((context.mouse.y + context.scroll.y - element.position.y) / element.factor).toString())\r\n            )\r\n\r\n            // set the additional pixels as css transform translate\r\n            element.setTranslate(additional)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update the correct current mouse position\r\n     * @param {FollowPosition} position\r\n     * @param context\r\n     */\r\n    private static updateMousePosition (position: FollowPosition, context: any) {\r\n        context.mouse.x = position.x\r\n        context.mouse.y = position.y\r\n    }\r\n\r\n    /**\r\n     * Update the correct current scroll position\r\n     * @param {FollowPosition} position\r\n     * @param context\r\n     */\r\n    private static updateScrollPosition (position: FollowPosition, context: any) {\r\n        context.scroll.x = position.x\r\n        context.scroll.y = position.y\r\n    }\r\n\r\n    /**\r\n     * Set FollowOptions if they have been passed in the object initialization\r\n     * @param {object} options\r\n     */\r\n    setDefaults (options: object) {\r\n        if (options && options['defaults']) {\r\n            for (const property in this.defaults) {\r\n                if (this.defaults.hasOwnProperty(property) && options['defaults'][property] !== undefined) {\r\n                    this.defaults[property] = options['defaults'][property]\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass FollowElement {\r\n    /**\r\n     * The HTML target of the Follow Element\r\n     * @type HTMLElement\r\n     */\r\n    public target: HTMLElement\r\n\r\n    /**\r\n     * The factor which defines how fast the element follows\r\n     * @type number\r\n     */\r\n    public factor: number\r\n\r\n    /**\r\n     * The position of the element\r\n     * @type FollowPosition\r\n     */\r\n    public position: FollowPosition\r\n\r\n    /**\r\n     * The current translate property\r\n     * @type string\r\n     */\r\n    public translate: string\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {HTMLElement} target\r\n     * @param {FollowDefaults} defaults\r\n     */\r\n    constructor (target: HTMLElement, defaults: FollowDefaults) {\r\n        this.target = target\r\n        this.factor = parseInt(target.getAttribute(defaults['attribute'])) || defaults['factor']\r\n        this.position = this.getPosition()\r\n    }\r\n\r\n    /**\r\n     * Get position of target to calculate translate values\r\n     * @return {FollowPosition}\r\n     */\r\n    public getPosition () {\r\n        // define absolute location of element\r\n        let bodyRectangular: ClientRect = document.body.getBoundingClientRect()\r\n        let elemRect: ClientRect = this.target.getBoundingClientRect()\r\n        let x: number = elemRect.left - bodyRectangular.left\r\n        let y: number = elemRect.top - bodyRectangular.top\r\n\r\n        // calculate position center of element\r\n        let height: number = this.target.offsetHeight\r\n        let width: number = this.target.offsetWidth\r\n\r\n        x += (width / 2)\r\n        y += (height / 2)\r\n\r\n        return new FollowPosition(x, y)\r\n    }\r\n\r\n    /**\r\n     * Update the position of the element\r\n     */\r\n    public updatePosition () {\r\n        this.position = this.getPosition()\r\n    }\r\n\r\n    /**\r\n     * Replace the new translate property with the old one\r\n     * @param {FollowPosition} position\r\n     */\r\n    public setTranslate (position: FollowPosition) {\r\n        // if value is exactly zero, change to 0.01 because the css interpreter in the browser interprets it different\r\n        if (position.x === 0) position.x = 0.1\r\n        if (position.y === 0) position.y = 0.1\r\n\r\n        let transform: string = this.target.style.transform\r\n        let translate: string = `translate(${position.x}px, ${position.y}px)`\r\n\r\n        if (this.translate) {\r\n            transform = transform.replace(this.translate, translate)\r\n        } else {\r\n            transform += ` ${translate}`.trim()\r\n        }\r\n\r\n        this.translate = translate\r\n        this.target.style.transform = transform\r\n    }\r\n}\r\n\r\nclass FollowPosition {\r\n    /**\r\n     * X Value of Position\r\n     * @type number\r\n     */\r\n    public x: number\r\n\r\n    /**\r\n     * Y Value of Position\r\n     * @type number\r\n     */\r\n    public y: number\r\n\r\n    /**\r\n     * Z Value of Position\r\n     * @type number\r\n     */\r\n    public z: number\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} z (optional)\r\n     */\r\n    constructor (x: number, y: number, z: number = 0) {\r\n        this.x = x\r\n        this.y = y\r\n        this.z = z\r\n    }\r\n}\r\n\r\n/**\r\n * Object with all the default settings in it.\r\n * The values may be overwritten\r\n */\r\nclass FollowDefaults {\r\n    /**\r\n     * The factor how much the element moves with your cursor\r\n     * @type {number}\r\n     */\r\n    public factor: number = 10\r\n\r\n    /**\r\n     * The attribute for the elements you want to follow\r\n     * @type {string}\r\n     */\r\n    public attribute: string = 'data-follow'\r\n\r\n    /**\r\n     * If the object should automatically initiate the script on initialization of the class\r\n     * @type {boolean}\r\n     */\r\n    public initiate: boolean = true\r\n}\r\n\r\n/**\r\n * Check if auto init is enabled and if true, auto initialize the script\r\n * To enable it, add the attribute 'data-follow-auto' to the place where you add the script in your code\r\n */\r\n(() => {\r\n    if (document.currentScript) {\r\n        let value: string = document.currentScript.getAttribute('data-follow-auto')\r\n        if (value === '' || value === 'true') {\r\n            window['follow'] = new Follow()\r\n        }\r\n    }\r\n})()"]}